(this.webpackJsonpgestionnaire=this.webpackJsonpgestionnaire||[]).push([[3],Array(212).concat([function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/0-cagnotte.95cb65b9.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/1-cagnotte.7452b600.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/2-cagnotte.445eb7b2.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/3-cagnotte.b0e352b3.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/4-cagnotte.361b4e5a.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/5-cagnotte.802d9062.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/6-cagnotte.bea6e0d2.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/7-cagnotte.470119c3.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/8-cagnotte.b832bc60.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/9-cagnotte.c9190fa4.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/10-cagnotte.018433e8.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/11-cagnotte.1cd13993.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/12-cagnotte.0a7516a8.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/13-cagnotte.ed08cf1e.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/14-cagnotte.acd807ea.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/15-cagnotte.54e5af1d.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/16-cagnotte.375887a5.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/17-cagnotte.a761dba5.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/18-cagnotte.fc9a403c.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/19-cagnotte.9a17bbf5.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/20-cagnotte.5efd4481.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/21-cagnotte.89182ba5.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/22-cagnotte.ae35f93c.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/23-cagnotte.89203923.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/24-cagnotte.63ef31b9.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/25-cagnotte.13480b77.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/26-cagnotte.3f13ec1b.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/27-cagnotte.63d944e5.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/28-cagnotte.c10f4815.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/29-cagnotte.e7cb9226.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/30-cagnotte.735839d7.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/31-cagnotte.df0fa421.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/32-cagnotte.54b3405d.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/33-cagnotte.97927a35.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/34-cagnotte.3e96b159.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/35-cagnotte.6ef09b3c.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/36-cagnotte.871c637e.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/37-cagnotte.bccb0504.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/38-cagnotte.e1fb5dcb.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/39-cagnotte.992d612b.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/40-cagnotte.019f462e.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/41-cagnotte.636366a2.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/42-cagnotte.6dd0bb7a.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/43-cagnotte.fd3ff516.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/44-cagnotte.dd696008.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/45-cagnotte.3b336016.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/46-cagnotte.2d17e65f.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/47-cagnotte.f0a12cb0.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/48-cagnotte.41194781.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/49-cagnotte.1f880ff8.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/50-cagnotte.535cbc39.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/51-cagnotte.8e26e656.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/52-cagnotte.fa1cfd36.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/53-cagnotte.aa827b65.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/54-cagnotte.d241d03e.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/55-cagnotte.0068a880.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/56-cagnotte.54532d9b.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/57-cagnotte.e63b1f4b.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/58-cagnotte.9f03b0fc.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/59-cagnotte.b733f515.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/60-cagnotte.6d4b3782.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/61-cagnotte.bfa8be86.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/62-cagnotte.81085aa7.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/63-cagnotte.0942290f.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/64-cagnotte.5017f5f9.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/65-cagnotte.5188fb90.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/66-cagnotte.ce213332.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/67-cagnotte.e2f8da95.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/68-cagnotte.76ff6a0b.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/69-cagnotte.d3015bf1.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/70-cagnotte.b920f7d3.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/71-cagnotte.2c113931.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/72-cagnotte.6b4db555.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/73-cagnotte.0a167e95.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/74-cagnotte.662ffb21.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/75-cagnotte.109e015f.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/76-cagnotte.9314add6.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/77-cagnotte.01248d62.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/78-cagnotte.f6ad3211.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/79-cagnotte.4ead1f2d.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/80-cagnotte.69bbcec7.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/81-cagnotte.2d26e171.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/82-cagnotte.1875d7a8.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/83-cagnotte.a68784c8.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/84-cagnotte.80f7ce16.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/85-cagnotte.840bdca5.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/86-cagnotte.323f19a5.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/87-cagnotte.58a3fc7c.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/88-cagnotte.aba747dc.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/89-cagnotte.f3555606.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/90-cagnotte.aaf4632e.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/91-cagnotte.c10c294f.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/92-cagnotte.316a1d75.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/93-cagnotte.a1ef89f5.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/94-cagnotte.057caa52.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/95-cagnotte.44169d74.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/96-cagnotte.5c8574e6.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/97-cagnotte.67cbf6c0.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/98-cagnotte.1e9202ad.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/99-cagnotte.45b28aa4.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/100-cagnotte.78d76362.png"},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(18),r=n.n(c),s=(n(212),n(42)),o=n(10),l=(n(213),n(108),n(214),n(24)),d=n(177),u=n.n(d),f=n(176),j=n.n(f),p=n(390),b=n(391),h=n(389),x=n(79),m=n(187),g=n(402),O=n(395),v=n(35),y=n(111),C=n(175),S=n.n(C),I=n(379),k=n(355),T=n(384),F=n(348),L=n(398),w=n(387),E=n(400),N=n(396),D=n(103),W=n(351),M=n(72),A=n(75),_=n.n(A),R=n(26),B=n(388),z=n(397),P=n.p+"static/media/no-thumbnail.589f64c7.jpg",H=n(3),q=i.a.forwardRef((function(e,t){return Object(H.jsx)(I.a,Object(s.a)({direction:"up",ref:t},e))}));function V(e){var t=Object(a.useState)(0),n=Object(o.a)(t,2),i=n[0],c=n[1],r=Object(a.useState)(new Date),s=Object(o.a)(r,2),l=s[0],d=s[1],u=Object(a.useState)(1),f=Object(o.a)(u,2),j=f[0],p=f[1],b=Object(a.useState)(""),h=Object(o.a)(b,2),m=h[0],y=h[1],C=Object(a.useState)(""),I=Object(o.a)(C,2),A=I[0],V=I[1],U=Object(a.useState)(""),J=Object(o.a)(U,2),G=J[0],K=J[1],Q=Object(a.useState)(""),X=Object(o.a)(Q,2),Y=X[0],Z=X[1],$=Object(a.useState)(""),ee=Object(o.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(""),ie=Object(o.a)(ae,2),ce=ie[0],re=ie[1],se=Object(a.useState)([]),oe=Object(o.a)(se,2),le=oe[0],de=oe[1],ue=Object(a.useState)([{title:"",description:"",image:P,errors:[]}]),fe=Object(o.a)(ue,2),je=fe[0],pe=fe[1];Object(a.useEffect)((function(){e.open&&"editItem"===e.mode&&(c(parseInt(unescape(e.inter.codeInter))+0),d(e.inter.dateInter.toDate()),y(unescape(e.inter.names)),p(4*parseFloat(e.inter.duree)),V(unescape(e.inter.addrText)),Z(unescape(e.inter.tel.fix)),K(unescape(e.inter.tel.mobile)),ne(unescape(e.inter.materiel.join(", "))),re(unescape(e.inter.technicien)),console.log("Mode edit",e.inter))}),[e]);var be=function(e){var t=je.map((function(e,t){return e})),n=[{val:t[e].title,name:"title"},{val:t[e].description,name:"description"}];return t[e].errors=[],n.forEach((function(n,a){n.val||t[e].errors.push(n.name)})),pe(t),0===t[e].errors.length},he=function(){var e=l.getHours(),t=l.getMinutes();e<10&&(e="0"+e),t<10&&(t="0"+t);var n=Object(O.a)(l,-15*j),a=n.getHours(),i=n.getMinutes();return a<10&&(a="0"+a),i<10&&(i="0"+i),e+"h"+t+" \xe0 "+a+"h"+i},xe=function(){var t=e.syndic,n=(l.toISOString().replace(/T(.*)/,""),l.toLocaleTimeString(),j/4),a=ce,c={tel:{mobile:G,fix:Y},addr:escape(A),hours:he(),names:escape(m),materiel:te.split(",").map((function(e,t){return escape(e.trim())}))},r={addr:new v.a.firestore.GeoPoint(48.90225300970771,2.47919066966666),addrText:c.addr,agence:t,dateInter:v.a.firestore.Timestamp.fromDate(l),duree:n,hours:c.hours,materiel:c.materiel,names:c.names,technicien:a,"tel.fix":c.tel.fix,"tel.mobile":c.tel.mobile};v.a.firestore().collection("interventions").doc(i+"").update(r).then((function(){console.log("Firebase - Intervention modifi\xe9 : "+i),e.close()})).catch((function(e){console.error("Firebase - Erreur lors de la modif de l'intervention: ",e)}))};return Object(H.jsxs)(k.a,{open:e.open,TransitionComponent:q,keepMounted:!0,onClose:e.close,children:[Object(H.jsx)(T.a,{style:{textAlign:"center"},children:"addItem"===e.mode?"Nouvelle Intervention":"Editer l'intervention"}),Object(H.jsxs)(F.a,{children:[Object(H.jsxs)("div",{style:{justifyContent:"space-between",display:"flex",alignItems:"baseline",borderBottom:"1px solid #eee",paddingBottom:"2.5em",marginBottom:".5em"},children:[Object(H.jsx)(L.a,{style:{marginRight:"16px"},error:-1!==le.indexOf("codeInter"),value:i,onChange:function(e){return c(e.target.value)},autoFocus:!0,margin:"dense",label:"N\xb0 inter",placeholder:"3242",type:"number"}),Object(H.jsx)(R.a,{utils:M.a,locale:_.a,children:Object(H.jsx)(B.b,{style:{marginRight:"16px"},label:"Date de l'inter",variant:"inline",format:"dd/MM/yyyy",openTo:"date",error:-1!==le.indexOf("date"),value:l,onChange:d})}),Object(H.jsx)(R.a,{utils:M.a,locale:_.a,children:Object(H.jsx)(z.a,{style:{marginRight:"16px"},ampm:!1,minutesStep:15,variant:"inline",label:"Heure de d\xe9but",error:-1!==le.indexOf("date"),value:function(){var e=l.getMinutes(),t=Math.round(e/15);return l.setMinutes(15*t),l}(),onChange:d})}),Object(H.jsxs)(w.a,{style:{minWidth:"96px"},children:[Object(H.jsx)(E.a,{id:"heureFinLabel",children:"Dur\xe9e"}),Object(H.jsxs)(N.a,{labelId:"heureFinLabel",value:j,onChange:function(e){return p(e.target.value)},children:[Object(H.jsx)(g.a,{value:1,children:"15mn"}),Object(H.jsx)(g.a,{value:2,children:"30mn"}),Object(H.jsx)(g.a,{value:3,children:"45mn"}),Object(H.jsx)(g.a,{value:4,children:"1h"}),Object(H.jsx)(g.a,{value:5,children:"1h15"}),Object(H.jsx)(g.a,{value:6,children:"1h30"}),Object(H.jsx)(g.a,{value:7,children:"1h45"}),Object(H.jsx)(g.a,{value:8,children:"2h"}),Object(H.jsx)(g.a,{value:9,children:"2h15"}),Object(H.jsx)(g.a,{value:10,children:"2h30"}),Object(H.jsx)(g.a,{value:11,children:"2h45"}),Object(H.jsx)(g.a,{value:12,children:"3h"}),Object(H.jsx)(g.a,{value:13,children:"3h15"}),Object(H.jsx)(g.a,{value:14,children:"3h30"}),Object(H.jsx)(g.a,{value:15,children:"3h45"}),Object(H.jsx)(g.a,{value:16,children:"4h"}),Object(H.jsx)(g.a,{value:17,children:"4h15"}),Object(H.jsx)(g.a,{value:18,children:"4h30"}),Object(H.jsx)(g.a,{value:19,children:"4h45"}),Object(H.jsx)(g.a,{value:20,children:"5h"}),Object(H.jsx)(g.a,{value:21,children:"5h15"}),Object(H.jsx)(g.a,{value:22,children:"5h30"}),Object(H.jsx)(g.a,{value:23,children:"5h45"}),Object(H.jsx)(g.a,{value:24,children:"6h"})]})]})]}),Object(H.jsxs)("div",{style:{justifyContent:"space-between",display:"flex",alignItems:"baseline",borderBottom:"1px solid #eee",paddingBottom:"2.5em",marginBottom:".5em"},children:[Object(H.jsxs)("div",{style:{marginRight:"16px",flex:3},children:[Object(H.jsx)(L.a,{margin:"dense",error:-1!==le.indexOf("idClient"),value:unescape(m),onChange:function(e){return y(e.target.value)},label:"Identit\xe9 du client",type:"text",fullWidth:!0}),Object(H.jsx)(L.a,{margin:"dense",error:-1!==le.indexOf("adresseClient"),value:unescape(A),onChange:function(e){return V(e.target.value)},label:"Adresse du client",type:"text",fullWidth:!0})]}),Object(H.jsxs)("div",{style:{flex:1},children:[Object(H.jsx)(L.a,{margin:"dense",error:-1!==le.indexOf("telMobile"),value:G,onChange:function(e){return K(e.target.value)},label:"T\xe9l\xe9phone mobile",type:"tel"}),Object(H.jsx)(L.a,{margin:"dense",error:-1!==le.indexOf("telFixe"),value:Y,onChange:function(e){return Z(e.target.value)},label:"T\xe9l\xe9phone fixe",type:"tel"})]})]}),Object(H.jsxs)("div",{style:{justifyContent:"space-between",display:"flex",alignItems:"baseline",borderBottom:"1px solid #eee",paddingBottom:"2.5em",marginBottom:".5em"},children:[Object(H.jsx)(L.a,{style:{flex:3},margin:"dense",label:"Mat\xe9riel requis (ex: outils, niveau, ...)",error:-1!==le.indexOf("materielTask"),value:unescape(te),onChange:function(e){return ne(e.target.value)},placeholder:"Separer par des virgules",type:"text",fullWidth:!0}),Object(H.jsxs)(w.a,{style:{minWidth:"128px",marginLeft:"16px",flex:1},children:[Object(H.jsx)(E.a,{id:"technicienLabel",children:"Technicien"}),Object(H.jsx)(N.a,{labelId:"technicienLabel",error:-1!==le.indexOf("technicienInter"),value:ce,onChange:function(e){return re(e.target.value)},children:e.techniciens.map((function(e,t){return Object(H.jsx)(g.a,{value:e.id,children:e.nom+" "+e.prenom},t)}))})]})]}),"addItem"===e.mode&&je.map((function(e,t){return Object(H.jsxs)("div",{className:"addTaskWrapper",children:[Object(H.jsx)("span",{className:"addTaskWrapper_delete",onClick:function(){return function(e){var t=je.map((function(e,t){return e}));t.length>1&&t.splice(e,1),pe(t)}(t)},children:Object(H.jsx)(S.a,{style:{color:"#aaa",cursor:"pointer"}})}),Object(H.jsxs)("div",{style:{flex:3},children:[Object(H.jsx)(L.a,{margin:"dense",label:"Tache n\xb0"+(t+1),error:-1!==e.errors.indexOf("title"),value:e.title,onChange:function(e){return function(e,t){var n=je.map((function(e,t){return e}));n[e].title=t,pe(n)}(t,e.target.value)},placeholder:"Titre de la tache",type:"text",fullWidth:!0},t+"_1"),Object(H.jsx)(L.a,{multiline:!0,margin:"dense",label:"Description",error:-1!==e.errors.indexOf("description"),value:e.description,onChange:function(e){return function(e,t){var n=je.map((function(e,t){return e}));n[e].description=t,pe(n)}(t,e.target.value)},placeholder:"Description de la tache",type:"text",fullWidth:!0},t+"_2")]}),Object(H.jsx)("div",{style:{flex:1,marginLeft:"16px"},children:Object(H.jsx)(x.a,{component:"div",style:{display:"flex",marginBottom:"3px"},children:Object(H.jsx)("img",{src:e.image,alt:"description",style:{width:"100%",minHeight:"92px"}})},t+"_3")})]},t)})),"addItem"===e.mode&&Object(H.jsx)(D.a,{size:"small",color:"primary",variant:"outlined",style:{margin:"1em auto",display:"flex"},onClick:function(){var e={title:"",description:"",image:P,errors:[]},t=je.map((function(e,t){return e}));t.push(e),console.log(P),pe(t)},children:"Ajouter une tache"})]}),Object(H.jsx)(W.a,{children:Object(H.jsx)(D.a,{onClick:function(){if(function(){var t=[{val:i,name:"codeInter"},{val:e.syndic,name:"syndic"},{val:l,name:"date"},{val:j,name:"heureFin"},{val:te,name:"materielTask"},{val:ce,name:"technicienInter"},{val:G,name:"telMobile"},{val:Y,name:"telFixe"},{val:A,name:"adresseClient"},{val:m,name:"idClient"}],n=[];return t.forEach((function(e,t){e.val||n.push(e.name)})),de(n),"editItem"===e.mode||-1!==je.map((function(e,t){return!be(t)})).indexOf(!0)&&n.push("Task"),0===n.length}())if("editItem"!==e.mode){var t=e.syndic,n=l.toISOString().replace(/T(.*)/,"")+" "+l.toLocaleTimeString(),a=j/4,c=ce,r={tel:{mobile:G,fix:Y},addr:escape(A),hours:he(),names:escape(m),materiel:te.split(",").map((function(e,t){return escape(e.trim())}))},s={codeInter:i,agence:t,dateInter:n,duree:a,technicien:c,intervention:JSON.stringify(r),etat:"En attente"},o=[];je.map((function(e,t){var n={codeInter:i,ordre:t,tache:JSON.stringify({title:escape(e.title),description:escape(e.description),image:e.image})};return o.push({etat:"Non r\xe9alis\xe9",retourCommentaire:"",retourEtat:0,retourPhoto:"",retourRaison:"",tache:{title:escape(e.title),description:escape(e.description),image:e.image}}),n}));var d={addr:new v.a.firestore.GeoPoint(48.90225300970771,2.47919066966666),addrText:r.addr,agence:t,dateInter:v.a.firestore.Timestamp.fromDate(l),duree:a,etat:"En attente",hours:r.hours,materiel:r.materiel,names:r.names,taches:o,technicien:c,tel:{fix:r.tel.fix,mobile:r.tel.mobile}};console.log(d),v.a.firestore().collection("interventions").doc(i).set(d).then((function(){console.log("Firebase - Intervention ajout\xe9e : "+i),e.close()})).catch((function(e){console.error("Firebase - Erreur lors de l'ajout de l'intervention: ",e)})),console.log(s),console.log("addTask",je)}else xe()},color:"primary",children:"Valider"})})]})}function U(e){var t=Object(a.useState)("Foncia"),n=Object(o.a)(t,2),i=n[0],c=n[1],r=Object(a.useState)(null),s=Object(o.a)(r,2),l=s[0],d=s[1],f=Object(a.useState)(!1),O=Object(o.a)(f,2),v=O[0],y=O[1],C=function(){return d(null)},S=function(t){c(t),C(),e.selectSyndic(t)};return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(p.a,{}),Object(H.jsx)(b.a,{children:Object(H.jsxs)(h.a,{children:[Object(H.jsx)(x.a,{style:{flex:4,fontSize:"16px",fontWeight:"700"},variant:"h1",children:"Marcel Renovation"}),Object(H.jsx)(x.a,{style:{flex:1,cursor:"pointer"},onClick:function(){return y(!0)},children:Object(H.jsx)(j.a,{})}),Object(H.jsx)(x.a,{style:{flex:8,fontWeight:"700",textAlign:"center"},children:Object(H.jsxs)(x.a,{component:"span",style:{cursor:"pointer",fontWeight:"700"},onClick:function(e){return d(e.currentTarget)},children:[i,Object(H.jsx)(u.a,{style:{verticalAlign:"text-bottom"}})]})}),Object(H.jsx)(x.a,{style:{flex:2}}),Object(H.jsx)(x.a,{style:{flex:3,padding:"2px 8px"}}),Object(H.jsx)(x.a,{style:{textAlign:"right",marginLeft:"16px"},children:" "}),Object(H.jsxs)(m.a,{anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:C,children:[Object(H.jsx)(g.a,{onClick:function(){return S("Foncia")},children:"Foncia"}),Object(H.jsx)(g.a,{onClick:function(){return S("Cytia")},children:"Cytia"}),Object(H.jsx)(g.a,{onClick:function(){return S("Tous")},children:"Tous"})]})]})}),Object(H.jsx)(V,{mode:"addItem",open:v,close:function(){return y(!1)},syndic:i,techniciens:e.techniciens})]})}var J=["08h00","08h15","08h30","08h45","09h00","09h15","09h30","09h45","10h00","10h15","10h30","10h45","11h00","11h15","11h30","11h45","12h00","12h15","12h30","12h45","13h00","13h15","13h30","13h45","14h00","14h15","14h30","14h45","15h00","15h15","15h30","15h45","16h00","16h15","16h30","16h45","17h00","17h15","17h30","17h45","18h00","18h15","18h30","18h45","19h00","19h15","19h30","19h45","20h00","20h15","20h30","20h45","21h00","21h15","21h30","21h45","22h00","22h15","22h30","22h45"],G=n(350);var K=function(e){var t=Object(a.useState)(new Date),n=Object(o.a)(t,2),i=n[0],c=n[1],r=Object(a.useState)(e.allTechniciens||[]),s=Object(o.a)(r,2),l=s[0],d=s[1],u=Object(a.useState)(e.weekTasks||[]),f=Object(o.a)(u,2),j=f[0],p=f[1];return Object(a.useEffect)((function(){e.allTechniciens&&d(e.allTechniciens),e.weekTasks&&p(e.weekTasks)}),[e]),Object(a.useEffect)((function(){setTimeout((function(){c(new Date)}),6e4)}),[i]),Object(H.jsx)("div",{className:"SchedulerDayWrapper",children:Object(H.jsx)(G.a,{in:l.length>0,timeout:{enter:500,exit:250},mountOnEnter:!0,unmountOnExit:!0,children:Object(H.jsx)("div",{style:{display:"flex"},children:l.map((function(t,n){var a=0!==n?"1px solid #ddd":"none";return Object(H.jsxs)("div",{style:{flex:1,borderLeft:a},children:[Object(H.jsxs)("div",{className:"technicienId",children:[Object(H.jsx)("div",{style:{fontWeight:"700"},children:t.nom}),Object(H.jsx)("div",{children:t.prenom})]}),J.map((function(a,c){var r=c%2===0?"halfHour hLines":"quartHour hLines";c%4===0&&(r="Hour hLines");var s=i,o=s.getHours(),l=s.getMinutes(),d=a.split("h"),u=parseInt(d[0]),f=parseInt(d[1]);return o===u&&l>f&&l-f<15&&(r+=" selected "),Object(H.jsxs)("div",{className:r,children:[0===n&&Object(H.jsx)("span",{className:"displayTime",children:c%4===0?a:""}),j.map((function(n,i){if(n.dateInter.toDate().getDay()===e.date.getDay()){var c=n.dateInter.toDate().getHours(),r=n.dateInter.toDate().getMinutes();c<10&&(c="0"+c),r<10&&(r="0"+r);var s=c+"h"+r,o=18*(parseFloat(n.duree)/.25);if(s===a&&n.technicien===t.id){var l=function(e,t){var n,a="color"===e?"color":"bgColor";return"En attente"===t.etat&&(n=a+"_EnAttente"),"En cours"===t.etat&&(n=a+"_EnCours"),"Termin\xe9e"===t.etat&&(n=a+"_Terminee"),"Annul\xe9e"===t.etat&&(n=a+"_Annulee"),"Refus\xe9e"===t.etat&&(n=a+"_Refusee"),"Finalis\xe9e"===t.etat&&(n=a+"_Finalisee"),n}("bg",n);return Object(H.jsxs)("div",{onClick:function(){e.setAnimateCurrentTask(!1),setTimeout((function(){e.setCurrentInterId(i),e.setCurrentTasks(n)}),350)},style:{height:o},className:"InterventionCard "+l,children:["N\xb0 ",n.codeInter]},i)}return!1}return!1}))]},c)}))]},n)}))})})})},Q=i.a.forwardRef((function(e,t){return Object(H.jsx)(I.a,Object(s.a)({direction:"up",ref:t},e))}));function X(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),i=n[0],c=n[1],r=Object(a.useState)(""),s=Object(o.a)(r,2),l=s[0],d=s[1],u=Object(a.useState)(!1),f=Object(o.a)(u,2),j=f[0],p=f[1];return Object(H.jsxs)(k.a,{className:"loginModal",open:e.open,TransitionComponent:Q,fullWidth:!0,keepMounted:!0,onClose:e.close,children:[Object(H.jsx)(T.a,{style:{textAlign:"center"},children:"Connectez-vous"}),Object(H.jsxs)(F.a,{style:{display:"flex",flexDirection:"column"},children:[Object(H.jsx)(L.a,{label:"Adresse e-mail",value:i,onChange:function(e){return c(e.target.value)},style:{margin:"24px 24px 0 24px"}}),Object(H.jsx)(L.a,{label:"Mot de passe",type:"password",value:l,onChange:function(e){return d(e.target.value)},style:{margin:"24px"}}),Object(H.jsx)(G.a,{in:j,timeout:{enter:500,exit:250},mountOnEnter:!0,unmountOnExit:!0,children:Object(H.jsx)(x.a,{style:{color:"#dc3545",margin:"0 24px 24px 24px"},children:"Login ou mot de passe incorrect !"})}),Object(H.jsx)(D.a,{onClick:function(){v.a.auth().signInWithEmailAndPassword(i,l).then((function(t){p(!1);var n=t.user;console.log(n,n.uid),e.userId(n.uid),e.setLogged(!0)})).catch((function(t){console.log(t.code,t.message),p(!0),e.setLogged(!1)}))},variant:"outlined",color:"primary",style:{margin:"24px"},children:"Se connecter"})]})]})}var Y=n(403),Z=n(392),$=n(393),ee=n(394),te=n(352),ne=n(181),ae=n.n(ne),ie=n(179),ce=n.n(ie),re=n(101),se=n.n(re),oe=n(121),le=n.n(oe),de=n(180),ue=n.n(de),fe=n(182),je=n.n(fe),pe=n(185),be=n.n(pe),he=n(184),xe=n.n(he),me=n(183),ge=n.n(me),Oe=n(119),ve=n.n(Oe),ye=n(120),Ce=n.n(ye),Se=n(122),Ie=n.n(Se),ke=n(186),Te=n.n(ke),Fe=n(123),Le=n.n(Fe),we={0:n(245),1:n(246),2:n(247),3:n(248),4:n(249),5:n(250),6:n(251),7:n(252),8:n(253),9:n(254),10:n(255),11:n(256),12:n(257),13:n(258),14:n(259),15:n(260),16:n(261),17:n(262),18:n(263),19:n(264),20:n(265),21:n(266),22:n(267),23:n(268),24:n(269),25:n(270),26:n(271),27:n(272),28:n(273),29:n(274),30:n(275),31:n(276),32:n(277),33:n(278),34:n(279),35:n(280),36:n(281),37:n(282),38:n(283),39:n(284),40:n(285),41:n(286),42:n(287),43:n(288),44:n(289),45:n(290),46:n(291),47:n(292),48:n(293),49:n(294),50:n(295),51:n(296),52:n(297),53:n(298),54:n(299),55:n(300),56:n(301),57:n(302),58:n(303),59:n(304),60:n(305),61:n(306),62:n(307),63:n(308),64:n(309),65:n(310),66:n(311),67:n(312),68:n(313),69:n(314),70:n(315),71:n(316),72:n(317),73:n(318),74:n(319),75:n(320),76:n(321),77:n(322),78:n(323),79:n(324),80:n(325),81:n(326),82:n(327),83:n(328),84:n(329),85:n(330),86:n(331),87:n(332),88:n(333),89:n(334),90:n(335),91:n(336),92:n(337),93:n(338),94:n(339),95:n(340),96:n(341),97:n(342),98:n(343),99:n(344),100:n(345)},Ee=n(7),Ne=Object(Ee.a)((function(e){return{tooltip:{backgroundColor:"#3f50b5",color:"#fff",padding:".5em 1em",boxShadow:e.shadows[1],fontSize:14}}}))(Y.a);var De=function(e){var t,n,i,c=Object(a.useState)(!1),r=Object(o.a)(c,2),d=r[0],u=r[1],f=Object(a.useState)(we[0]),j=Object(o.a)(f,2),p=(j[0],j[1],Object(a.useState)(!1)),b=Object(o.a)(p,2),h=b[0],O=b[1],v=Object(a.useState)(!1),y=Object(o.a)(v,2),C=y[0],S=y[1],k=Object(a.useState)(!1),T=Object(o.a)(k,2),F=T[0],w=T[1],E=Object(a.useState)(!1),N=Object(o.a)(E,2),W=N[0],A=N[1],z=Object(a.useState)(!1),q=Object(o.a)(z,2),J=q[0],G=q[1],Q=Object(a.useState)(new Date),Y=Object(o.a)(Q,2),ne=Y[0],ie=Y[1],re=Object(a.useState)(0),oe=Object(o.a)(re,2),de=(oe[0],oe[1],Object(a.useState)("Foncia")),fe=Object(o.a)(de,2),pe=fe[0],he=fe[1],me=Object(a.useState)([]),Oe=Object(o.a)(me,2),ye=(Oe[0],Oe[1],Object(a.useState)()),Se=Object(o.a)(ye,2),ke=Se[0],Fe=Se[1],Ee=Object(a.useState)(),De=Object(o.a)(Ee,2),We=De[0],Me=De[1],Ae=Object(a.useState)(""),_e=Object(o.a)(Ae,2),Re=_e[0],Be=_e[1],ze=Object(a.useState)(""),Pe=Object(o.a)(ze,2),He=Pe[0],qe=Pe[1],Ve=Object(a.useState)(""),Ue=Object(o.a)(Ve,2),Je=Ue[0],Ge=(Ue[1],Object(a.useState)([])),Ke=Object(o.a)(Ge,2),Qe=(Ke[0],Ke[1],Object(a.useState)(!1)),Xe=Object(o.a)(Qe,2),Ye=Xe[0],Ze=Xe[1],$e=Object(a.useState)(!1),et=Object(o.a)($e,2),tt=et[0],nt=et[1],at=Object(a.useState)(),it=Object(o.a)(at,2),ct=it[0],rt=it[1],st=Object(a.useState)([]),ot=Object(o.a)(st,2),lt=ot[0],dt=ot[1],ut=Object(a.useState)([]),ft=Object(o.a)(ut,2),jt=ft[0],pt=ft[1],bt=Object(a.useState)(null),ht=Object(o.a)(bt,2),xt=ht[0],mt=ht[1],gt=Object(a.useState)(null),Ot=Object(o.a)(gt,2),vt=Ot[0],yt=Ot[1],Ct=Object(a.useState)([]),St=Object(o.a)(Ct,2),It=St[0],kt=St[1],Tt=Object(a.useState)([]),Ft=Object(o.a)(Tt,2),Lt=Ft[0],wt=Ft[1],Et=Object(a.useState)([]),Nt=Object(o.a)(Et,2),Dt=Nt[0],Wt=Nt[1],Mt=Object(a.useState)([]),At=Object(o.a)(Mt,2),_t=At[0],Rt=At[1],Bt=Object(a.useState)(),zt=Object(o.a)(Bt,2),Pt=zt[0],Ht=zt[1],qt=Object(a.useState)(),Vt=Object(o.a)(qt,2),Ut=Vt[0],Jt=Vt[1],Gt=Object(a.useState)(!1),Kt=Object(o.a)(Gt,2),Qt=Kt[0],Xt=Kt[1],Yt=Object(a.useState)(null),Zt=Object(o.a)(Yt,2),$t=Zt[0],en=Zt[1],tn=function(){ct&&(an(),sn(),cn())},nn=function e(){console.log("unmount App"),t&&t(),n&&n(),i&&i(),window.removeEventListener("beforeunload",e)},an=function(){l.a.firestore().collection("users").get().then((function(e){var t=[],n=e.docs.map((function(e,n){return e.data().messagesId&&-1===t.indexOf(e.data().messagesId+"")&&e.id===ct&&(t=e.data().messagesId),Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id})}));wt(t);var a=n.filter((function(e){return"TECHNICIEN"===e.role}));dt(n),pt(a),console.log("Firebase - Liste des utilisateurs",n),console.log("Firebase - Liste des techniciens",a)}))},cn=function(){i=l.a.firestore().collection("messages").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id})}));Rt(t),console.log("Firebase - Liste de tout les messages",t),e.docChanges().forEach((function(e){if("modified"===e.type){console.log(e);var n=t[e.newIndex].to,a=t[e.newIndex].from,i=n===ct?a:n;console.log(i)}}))}))},rn=function(){t=l.a.firestore().collection("interventions").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(s.a)(Object(s.a)({},e.data()),{},{codeInter:e.id})}));mt(t),console.log("Firebase - Liste des interventions",t)}))},sn=function(){n=l.a.firestore().collection("users").doc(ct).onSnapshot((function(e){var t=e.data().notifications;console.log("Firebase - Liste des notifications",t),yt(t)}))},on=function(e,t){var n,a="color"===e?"color":"bgColor";return"En attente"===t.etat&&(n=a+"_EnAttente"),"En cours"===t.etat&&(n=a+"_EnCours"),"Termin\xe9e"===t.etat&&(n=a+"_Terminee"),"Annul\xe9e"===t.etat&&(n=a+"_Annulee"),"Refus\xe9e"===t.etat&&(n=a+"_Refusee"),"Finalis\xe9e"===t.etat&&(n=a+"_Finalisee"),"Factur\xe9e"===t.etat&&(n=a+"_Facturee"),"Pay\xe9e"===t.etat&&(n=a+"_Payee"),n},ln=function(){return en(null)},dn=function(e){l.a.firestore().collection("interventions").doc(We.codeInter+"").update({etat:e}).then((function(){console.log("Firebase - changement de l'etat de l'Intervention  : "+e)})).catch((function(e){console.error("Firebase - Erreur lors de la r\xe9affectation de l'intervention: ",e)}))};return Object(a.useEffect)((function(){return console.group("Initialisation de l'app"),window.addEventListener("beforeunload",nn),rn(),ct&&tn(),console.groupEnd(),nn}),[]),Object(a.useEffect)(tn,[ct]),Object(a.useEffect)((function(){return setTimeout((function(){return Xt(!0)}),500)}),[Qt]),Object(a.useEffect)((function(e){e||(e=Lt);var t=_t.filter((function(t){return-1!==e.indexOf(t.id)})).map((function(e){return e}));Wt(t),console.log("Firebase - Liste des messages filtr\xe9s",t)}),[_t,Lt]),Object(a.useEffect)((function(){if(xt){var e=xt.filter((function(e){return e.dateInter.toDate().toLocaleDateString("fr")===ne.toLocaleDateString("fr")&&e.agence===pe}));kt(e),Me(e[ke]),console.log("Firebase - Liste des interventions du jour",e)}}),[ne,pe,xt]),Object(H.jsxs)("div",{className:"App",children:[Object(H.jsx)("header",{className:"App-header",children:Object(H.jsx)(U,{techniciens:jt,selectSyndic:function(e){return he(e)}})}),Object(H.jsxs)("div",{style:{display:"flex",flexDirection:"column",flexFlow:"row"},children:[Object(H.jsxs)("div",{className:h?"leftContent full":"leftContent small",style:{flex:2,borderRight:"1px solid #ddd"},children:[!h&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("div",{className:"openLeftContent",children:Object(H.jsx)(te.a,{onClick:function(){return O(!0)},children:Object(H.jsx)(ce.a,{style:{color:"#fff"}})})}),Object(H.jsx)(te.a,{onClick:function(){return S(!C)},children:Object(H.jsx)(ue.a,{style:{color:"#fff"}})}),Object(H.jsx)("div",{style:{textAlign:"center",fontWeight:"700",color:"#fff",fontSize:"28px"},children:ne.getDate()<10?"0"+ne.getDate():ne.getDate()}),Object(H.jsx)("div",{style:{textAlign:"center",fontWeight:"700",color:"#aaa",fontSize:"28px"},children:ne.getMonth()+1<10?"0"+(ne.getMonth()+1):ne.getMonth()+1}),Object(H.jsx)("div",{style:{textAlign:"center",fontWeight:"500",color:"#aaa",fontSize:"12px",paddingTop:"8px"},children:ne.getFullYear()}),Object(H.jsx)("div",{className:C?"LeftContentSmallCalendar LeftContentSmallOpenCalendar":"LeftContentSmallCalendar LeftContentSmallCloseCalendar",children:Object(H.jsx)(R.a,{utils:M.a,locale:_.a,children:Object(H.jsx)(B.a,{autoOk:!0,variant:"static",openTo:"date",value:ne,onChange:ie})})}),Object(H.jsx)("hr",{style:{marginTop:"2em",borderColor:"#777"}}),Object(H.jsxs)(te.a,{onClick:function(){return w(!F)},children:[!F&&Object(H.jsx)(ve.a,{style:{color:"#fff"}}),F&&Object(H.jsx)(Ce.a,{style:{color:"#fff"}})]}),Object(H.jsxs)("div",{className:F?"LeftContentSmallHistory LeftContentSmallOpenHistory":"LeftContentSmallHistory LeftContentSmallCloseHistory",children:[Object(H.jsx)("div",{style:{flex:1},children:Object(H.jsx)(x.a,{align:"center",component:"h4",children:"Post prod Interventions"})}),Object(H.jsx)("div",{style:{flex:1},children:Object(H.jsx)(L.a,{className:"searchInput",fullWidth:!0,label:"Rechercher",placeholder:"Rechercher",style:{color:"white"}})}),Object(H.jsx)("div",{style:{flex:8,display:"flex"},children:Object(H.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",marginRight:"4px"},children:[Object(H.jsx)("div",{className:"historyLabel finalisee",children:xt&&xt.filter((function(e,t){return"Finalis\xe9e"===e.etat})).map((function(e,t){return Object(H.jsx)("span",{className:"historyTask",onClick:function(){Xt(!1),setTimeout((function(){return Me(e)}),350)},children:e.codeInter},t)}))}),Object(H.jsx)("div",{className:"historyLabel facturee",children:xt&&xt.filter((function(e,t){return"Factur\xe9e"===e.etat})).map((function(e,t){return Object(H.jsx)("span",{className:"historyTask",onClick:function(){Xt(!1),setTimeout((function(){return Me(e)}),350)},children:e.codeInter},t)}))}),Object(H.jsx)("div",{className:"historyLabel payee",children:xt&&xt.filter((function(e,t){return"Pay\xe9e"===e.etat})).map((function(e,t){return Object(H.jsx)("span",{className:"historyTask",onClick:function(){Xt(!1),setTimeout((function(){return Me(e)}),350)},children:e.codeInter},t)}))})]})})]}),Object(H.jsx)("hr",{style:{borderColor:"#777"}}),Object(H.jsx)(te.a,{onClick:function(){return A(!W)},children:Object(H.jsx)(le.a,{style:{color:"#fff"}})}),Object(H.jsxs)("div",{className:W?"LeftContentSmallNotification LeftContentSmallOpenNotification":"LeftContentSmallNotification LeftContentSmallCloseNotification",children:[Object(H.jsx)("div",{style:{flex:1},children:Object(H.jsx)(x.a,{align:"center",component:"h4",children:"Notifications"})}),Object(H.jsx)("div",{style:{flex:8,display:"flex"},children:Object(H.jsx)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:vt&&vt.map((function(e,t){return"read"===e.etat?null:"etatIntervention"===e.type?Object(H.jsxs)(D.a,{className:"NotificationItem",onClick:function(){var t=Object.entries(e.quoi).map((function(e){return e[0]}));Xt(!1),xt.filter((function(e){return e.codeInter===t[0]})).map((function(e,t){return setTimeout((function(){return Me(e)}),350)}))},children:[Object(H.jsxs)("div",{style:{flex:1},children:[Object(H.jsx)("div",{children:Object.entries(e.quoi).map((function(e,t){return Object(H.jsxs)("span",{children:["N\xb0 ",e[0]," (",e[1],")"]},t)}))}),Object(H.jsxs)("div",{style:{fontSize:"10px",color:"#777"},children:[lt.filter((function(t){return t.id===e.deQui})).map((function(e,t){return Object(H.jsxs)("span",{style:{fontWeight:"700"},children:[e.nom," ",e.prenom]},t)}))," - ",Object(H.jsx)("span",{style:{color:"#3f4fb5e6"},children:e.quand.toDate().toLocaleString("fr")})]})]}),Object(H.jsx)("div",{children:Object(H.jsx)(te.a,{children:Object(H.jsx)(se.a,{})})})]},t):void 0}))})})]}),Object(H.jsx)("hr",{style:{borderColor:"#777"}}),Object(H.jsx)(te.a,{onClick:function(){return G(!J)},children:Object(H.jsx)(Ie.a,{style:{color:"#fff"}})}),Object(H.jsxs)("div",{className:J?"LeftContentSmallMessage LeftContentSmallOpenMessage":"LeftContentSmallMessage LeftContentSmallCloseMessage",children:[Object(H.jsx)("div",{style:{flex:1},children:Object(H.jsx)(x.a,{align:"center",component:"h4",children:"Messages"})}),Object(H.jsxs)("div",{style:{flex:8,display:"flex"},children:[Object(H.jsx)("div",{style:{flex:1,display:"flex",flexDirection:"column",marginRight:"4px"},children:Object(H.jsx)("div",{children:lt.map((function(e,t){return"dev"!==e.role&&e.id!==ct&&Object(H.jsxs)("div",{onClick:function(){return Ht(e.id)},style:{flex:1,marginBottom:"12px",marginTop:0,borderBottom:"1px solid #aaa",fontWeight:"700",color:"#eee",padding:"8px 4px",cursor:"pointer",fontSize:"12px"},children:[e.nom," ",e.prenom]},t)}))})}),Object(H.jsxs)("div",{style:{flex:3,padding:"0 8px",marginLeft:"4px",display:"flex",flexDirection:"column"},children:[Object(H.jsx)("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"auto",maxHeight:"calc(100vh - 600px)"},children:Dt.filter((function(e){return e&&(e.to===Pt||e.from===Pt)})).map((function(e,t){return e.conversation.map((function(e,t){return Pt===e.from?Object(H.jsxs)("div",{style:{display:"flex",margin:"4px 2px"},children:[Object(H.jsxs)("div",{style:{flex:1,padding:"4px 8px",border:"1px solid #ddd",margin:"0 0 8px",borderRadius:"6px",background:"#ddd",color:"#333"},children:[Object(H.jsx)("div",{children:Object(H.jsx)("span",{children:e.quoi})}),Object(H.jsx)("div",{style:{fontSize:"10px",color:"#777"},children:Object(H.jsx)("span",{children:e.quand.toDate().toLocaleString("fr")})})]}),Object(H.jsx)("div",{style:{flex:1}})]},t):Pt===e.to?Object(H.jsxs)("div",{style:{display:"flex",margin:"4px 2px"},children:[Object(H.jsx)("div",{style:{flex:1}}),Object(H.jsxs)("div",{style:{flex:1,padding:"4px 8px",border:"1px solid #3f4fb5",margin:"0 0 8px",borderRadius:"6px",background:"#3f4fb5e6"},children:[Object(H.jsx)("div",{children:Object(H.jsx)("span",{children:e.quoi})}),Object(H.jsx)("div",{style:{fontSize:"10px",color:"#bbb"},children:Object(H.jsx)("span",{children:e.quand.toDate().toLocaleString("fr")})})]})]},t):void 0}))}))}),Object(H.jsxs)("div",{style:{height:"108px",padding:"2px 0 8px 0"},children:[Object(H.jsx)(D.a,{onClick:function(){var e=Dt.filter((function(e){return e.to===Pt||e.from===Pt}));if(Jt(""),1===e.length)l.a.firestore().collection("messages").doc(e[0].id+"").update({conversation:l.a.firestore.FieldValue.arrayUnion({from:ct,quand:l.a.firestore.Timestamp.fromDate(new Date),quoi:Ut,to:Pt})}).then((function(){console.log("Firebase - Message ajout\xe9 : "+Ut)})).catch((function(e){console.error("Firebase - Erreur lors de l'ajout du message: ",e)}));else{var t=l.a.firestore().collection("messages").doc(),n=Lt.map((function(e){return e}));n.push(t.id),wt(n),t.set({conversation:l.a.firestore.FieldValue.arrayUnion({from:ct,quand:l.a.firestore.Timestamp.fromDate(new Date),quoi:Ut,to:Pt}),from:ct,to:Pt}).then((function(e){console.log("Firebase - Message ajout\xe9 : "+Ut,t.id),l.a.firestore().collection("users").doc(ct).update({messagesId:l.a.firestore.FieldValue.arrayUnion(t.id)}).then((function(){console.log("Firebase - MessagesId ajout\xe9 a : "+ct)})).catch((function(e){console.error("Firebase - Erreur lors de l'ajout du message: ",e)})),l.a.firestore().collection("users").doc(Pt).update({messagesId:l.a.firestore.FieldValue.arrayUnion(t.id)}).then((function(){console.log("Firebase - MessagesId ajout\xe9 a : "+Pt)})).catch((function(e){console.error("Firebase - Erreur lors de l'ajout du message: ",e)}))})).catch((function(e){console.error("Firebase - Erreur lors de l'ajout du message: ",e)}))}},style:{marginBottom:"8px",width:"100%",textTransform:"capitalize",padding:"4px",background:"#3f4fb5",color:"white"},children:"Envoyer"}),Object(H.jsx)(L.a,{variant:"outlined",placeholder:"Message",fullWidth:!0,multiline:!0,rows:3,value:Ut,onChange:function(e){return Jt(e.target.value)}})]})]})]})]})]}),h&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("div",{className:"closeLeftContent",children:Object(H.jsx)(te.a,{onClick:function(){return O(!1)},children:Object(H.jsx)(ae.a,{style:{color:"#fff"}})})}),Object(H.jsx)("div",{style:{paddingBottom:"2em",borderBottom:"1px solid #ddd"},children:Object(H.jsx)(R.a,{utils:M.a,locale:_.a,children:Object(H.jsx)(B.a,{autoOk:!0,variant:"static",openTo:"date",value:ne,onChange:ie})})}),Object(H.jsxs)("div",{style:{overflow:"auto",maxHeight:"calc(100vh - 520px)",display:"flex"},children:[Object(H.jsx)("div",{style:{flex:1,alignItems:"center",justifyContent:"center",display:"flex"},children:Object(H.jsxs)(te.a,{onClick:function(){return w(!F)},children:[!F&&Object(H.jsx)(ve.a,{color:"primary"}),F&&Object(H.jsx)(Ce.a,{color:"primary"})]})}),Object(H.jsx)("div",{style:{flex:1,alignItems:"center",justifyContent:"center",display:"flex"},children:Object(H.jsx)(te.a,{onClick:function(){return A(!W)},children:Object(H.jsx)(le.a,{color:"primary"})})}),Object(H.jsx)("div",{style:{flex:1,alignItems:"center",justifyContent:"center",display:"flex"},children:Object(H.jsx)(te.a,{onClick:function(){return G(!J)},children:Object(H.jsx)(Ie.a,{color:"primary"})})})]})]})]}),Object(H.jsx)("div",{className:"centerContent",style:{flex:5},children:Object(H.jsx)("div",{style:{overflow:"auto",height:"100%",paddingLeft:"52px",paddingRight:"8px"},children:Object(H.jsx)(K,{date:ne,colorizedState:on,setAnimateCurrentTask:Xt,setCurrentInterId:Fe,setCurrentTasks:Me,allTechniciens:jt,weekTasks:It})})}),Object(H.jsx)("div",{className:"rightContent",style:{flex:2,borderLeft:"1px solid #ddd"},children:We&&Object(H.jsx)(I.a,{direction:"left",in:Qt,timeout:{enter:250,exit:250},mountOnEnter:!0,unmountOnExit:!0,children:Object(H.jsxs)("div",{children:["Finalis\xe9e"!==We.etat&&"Factur\xe9e"!==We.etat&&"Pay\xe9e"!==We.etat&&Object(H.jsxs)("div",{className:"actionBtnWrapper",children:[Object(H.jsx)(Ne,{title:"Supprimer",children:Object(H.jsx)(te.a,{onClick:function(){l.a.firestore().collection("interventions").doc(We.codeInter+"").delete().then((function(){console.log("Firebase - Intervention supprim\xe9e : "+We.codeInter)})).catch((function(e){console.error("Firebase - Erreur lors de la r\xe9affectation de l'intervention: ",e)}))},"aria-label":"delete",style:{color:"white"},children:Object(H.jsx)(je.a,{})})}),Object(H.jsx)(Ne,{title:"R\xe9affecter",children:Object(H.jsx)(te.a,{onClick:function(e){return en(e.currentTarget)},"aria-label":"affect",style:{color:"white"},children:Object(H.jsx)(ge.a,{})})}),Object(H.jsx)(Ne,{title:"Editer",children:Object(H.jsx)(te.a,{onClick:function(){return nt(!0)},"aria-label":"edit",style:{color:"white"},children:Object(H.jsx)(xe.a,{})})}),Object(H.jsx)(Ne,{title:"Annuler",children:Object(H.jsx)(te.a,{onClick:function(){return dn("Annul\xe9e")},"aria-label":"annuler",style:{color:"white"},children:Object(H.jsx)(se.a,{})})}),Object(H.jsx)(Ne,{title:"Terminer",children:Object(H.jsx)(te.a,{onClick:function(){return dn("Finalis\xe9e")},"aria-label":"terminer",style:{color:"white"},children:Object(H.jsx)(be.a,{})})})]},"wrapper_0"),"Finalis\xe9e"===We.etat&&Object(H.jsxs)("div",{className:"actionBtnWrapper",children:[Object(H.jsx)(Ne,{title:"Factur\xe9e",children:Object(H.jsx)(te.a,{onClick:function(){return dn("Factur\xe9e")},"aria-label":"delete",style:{color:"white"},children:Object(H.jsx)(Te.a,{})})}),Object(H.jsx)(Ne,{title:"Pay\xe9e",children:Object(H.jsx)(te.a,{onClick:function(){return dn("Pay\xe9e")},"aria-label":"delete",style:{color:"white"},children:Object(H.jsx)(Le.a,{})})})]},"wrapper_0"),"Factur\xe9e"===We.etat&&Object(H.jsx)("div",{className:"actionBtnWrapper",children:Object(H.jsx)(Ne,{title:"Pay\xe9e",children:Object(H.jsx)(te.a,{onClick:function(){return dn("Pay\xe9e")},"aria-label":"delete",style:{color:"white"},children:Object(H.jsx)(Le.a,{})})})},"wrapper_0"),Object(H.jsxs)(Z.a,{elevation:1,children:[Object(H.jsx)($.a,{className:"CardHeaderWrapper "+on("bg",We),style:{color:"#fff"},children:Object(H.jsxs)(x.a,{variant:"body2",style:{display:"flex"},component:"div",children:[Object(H.jsxs)("div",{style:{flex:5},children:[Object(H.jsx)("span",{style:{fontWeight:"700",fontSize:"24px"},children:"N\xb0"+We.codeInter})," ",Object(H.jsx)("br",{})," ",unescape(We.hours)]}),Object(H.jsx)("div",{style:{flex:1},children:Object(H.jsx)("img",{style:{maxWidth:"100%"},src:we[We.completion||0].default,alt:"completionInter"})})]})},"wrapper_1-1"),Object(H.jsxs)($.a,{children:[Object(H.jsx)(x.a,{gutterBottom:!0,variant:"h5",component:"h2",children:unescape(We.names)}),Object(H.jsxs)(x.a,{variant:"body2",color:"textSecondary",component:"div",children:[Object(H.jsx)("div",{style:{fontWeight:"700"},children:unescape(We.addrText)}),Object(H.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",paddingTop:"1em"},children:[Object(H.jsx)("div",{style:{border:"1px solid #ccc",padding:"4px 8px",borderRadius:"8px",fontWeight:"700"},children:unescape(We.tel.fix)}),Object(H.jsx)("div",{style:{border:"1px solid #ccc",padding:"4px 8px",borderRadius:"8px",fontWeight:"700"},children:unescape(We.tel.mobile)})]})]})]},"wrapper_1-2"),Object(H.jsx)($.a,{style:{background:"#333",color:"#fff"},children:Object(H.jsxs)(x.a,{variant:"body2",component:"div",children:["Materiel requis : ",Object(H.jsx)("br",{}),Object(H.jsx)("span",{style:{fontWeight:"700"},children:unescape(We.materiel.join(", "))})]})},"wrapper_1-3"),(We.taches||[]).map((function(e,t){return Object(H.jsxs)(a.Fragment,{children:[Object(H.jsxs)($.a,{style:{position:"relative"},children:[Object(H.jsx)(D.a,{className:"suppressTask",onClick:function(){return t=e,void l.a.firestore().collection("interventions").doc(We.codeInter+"").update({taches:l.a.firestore.FieldValue.arrayRemove(Object(s.a)({},t))}).then((function(){console.log("Firebase - Tache ajout\xe9e : "+We.codeInter)})).catch((function(e){console.error("Firebase - Erreur lors de l'ajout de la tache: ",e)}));var t},children:Object(H.jsx)(se.a,{})}),Object(H.jsx)(x.a,{gutterBottom:!0,component:"h3",style:{fontSize:"16px",fontWeight:"700"},children:unescape(e.tache.title)}),Object(H.jsxs)(x.a,{variant:"body2",color:"textSecondary",component:"div",style:{display:"flex"},children:[Object(H.jsx)("div",{style:{flex:2,fontWeight:"500",fontSize:"14px"},children:unescape(e.tache.description||"")}),Object(H.jsx)("img",{src:P,alt:"imgDescription",style:{marginLeft:"16px",height:"64px",flex:1,border:"1px solid #ccc"}})]}),Object(H.jsxs)("div",{className:"-1"===e.retourEtat?"returnTechnicien errorTechnicien":"returnTechnicien",children:["-1"===e.retourEtat&&Object(H.jsxs)("div",{style:{fontSize:14,fontWeight:"700",margin:".5em 0"},children:["L'intervention n'a pas pu etre completement termin\xe9e : ",e.retourRaison," "]}),(e.retourCommentaire||e.retourPhoto)&&Object(H.jsxs)("div",{style:{display:"flex"},children:[e.retourPhoto&&Object(H.jsxs)("div",{children:[" ",Object(H.jsx)("img",{style:{marginRight:"16px",height:"64px",flex:1,border:"1px solid #ccc"},src:"data:image/jpeg;base64,"+e.retourPhoto,alt:"retour img"})," "]}),e.retourCommentaire&&Object(H.jsxs)("div",{children:[" ",e.retourCommentaire.split("<br />").map((function(e){return Object(H.jsxs)(H.Fragment,{children:[e," ",Object(H.jsx)("br",{})]})}))," "]})]})]})]}),t<We.taches.length-1&&Object(H.jsx)("hr",{style:{border:"none",borderBottom:" 1px solid #ddd"}})]},t)})),Ye&&Object(H.jsxs)($.a,{style:{position:"relative",display:"flex"},children:[Object(H.jsx)("hr",{style:{position:"absolute",top:0,left:"16px",right:"16px"}}),Object(H.jsxs)("div",{style:{flex:2},children:[Object(H.jsx)(L.a,{value:Re,onChange:function(e){return Be(e.target.value)},margin:"dense",label:"Ajouter tache",placeholder:"Titre de la tache",type:"text",fullWidth:!0},"ajouter_1"),Object(H.jsx)(L.a,{value:He,onChange:function(e){return qe(e.target.value)},multiline:!0,margin:"dense",label:"Description",placeholder:"Description",type:"text",fullWidth:!0},"ajouter_2")]}),Object(H.jsx)("div",{style:{flex:1,marginLeft:"16px",display:"flex",alignItems:"flex-end"},children:Object(H.jsx)(x.a,{component:"div",style:{display:"flex",marginBottom:"3px"},children:Object(H.jsx)("img",{src:P,alt:"description",style:{marginLeft:"16px",height:"64px"}})},"ajouter_3")})]},"ajouterTache"),Object(H.jsxs)(ee.a,{style:{justifyContent:"center"},children:[!Ye&&Object(H.jsx)(D.a,{size:"small",color:"primary",onClick:function(){return Ze(!0)},children:"Ajouter une tache"}),Ye&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(D.a,{size:"small",color:"error",onClick:function(){return Ze(!1)},children:"Annuler l'ajout"}),Object(H.jsx)(D.a,{size:"small",color:"primary",onClick:function(){l.a.firestore().collection("interventions").doc(We.codeInter+"").update({taches:l.a.firestore.FieldValue.arrayUnion({etat:"Non r\xe9alis\xe9",retourCommentaire:"",retourEtat:0,retourPhoto:"",retourRaison:"",tache:{description:escape(He),image:Je,title:escape(Re)}})}).then((function(){console.log("Firebase - Tache ajout\xe9e : "+We.codeInter)})).catch((function(e){console.error("Firebase - Erreur lors de l'ajout de la tache: ",e)})),Ze(!1)},children:"Valider"})]})]},"wrapper_1-4")]},"wrapper_1")]})})})]}),Object(H.jsx)(m.a,{anchorEl:$t,keepMounted:!0,open:Boolean($t),onClose:function(){return ln()},children:jt.map((function(e,t){return Object(H.jsx)(g.a,{value:e.id,onClick:function(){return t=e.id,void l.a.firestore().collection("interventions").doc(We.codeInter+"").update({technicien:t}).then((function(){console.log("Firebase - Intervention r\xe9affect\xe9e : "+t),ln()})).catch((function(e){console.error("Firebase - Erreur lors de la r\xe9affectation de l'intervention: ",e)}));var t},children:e.nom+" "+e.prenom},t)}))}),Object(H.jsx)(V,{mode:"editItem",open:tt,close:function(){return nt(!1)},inter:We,syndic:pe,techniciens:jt}),Object(H.jsx)(X,{open:!d,userId:rt,setLogged:u})]})};r.a.render(Object(H.jsx)(y.a,{firebaseConfig:{apiKey:"AIzaSyCFPNMql3KPUtk4BblwcznqlaQaCNn2wq8",authDomain:"marcelrenovation-5c0dd.firebaseapp.com",databaseURL:"https://marcelrenovation-5c0dd-default-rtdb.europe-west1.firebasedatabase.app",projectId:"marcelrenovation-5c0dd",storageBucket:"marcelrenovation-5c0dd.appspot.com",messagingSenderId:"670924331540",appId:"1:670924331540:web:63407693ee908c30a96501",measurementId:"G-0XPH876H64"},children:Object(H.jsx)(De,{})}),document.getElementById("root"))}]),[[346,7,9]]]);
//# sourceMappingURL=main.aaa25212.chunk.js.map